ScreenManager:
    StartScreen:
    RegularOperationsScreen:
    RegularOperationTypesScreen:
    StatisticsScreen:
    AddRegularOperationScreen:
    SecretMenuScreen:
    ChangeRegularOperationScreen:

<StartScreen>:
    name: "main"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 1
            Label:
                text: "Контроллер баланса"
        Button:
            text: "К регулярным операциям"
            on_release:
                app.root.current="reg_ops"
                root.manager.transition.direction = "left"
        Button:
            text: "К статистике"
            on_release:
                app.root.current="stats"
                root.manager.transition.direction = "right"
        Button:
            text: "Добавить регулярную операцию"
            on_release:
                app.root.current="add_reg_op"
                root.manager.transition.direction = "up"

<RegularOperationsScreen>:
    name: "reg_ops"
    GridLayout:
        cols: 1
        Label:
            text: "Добавление регулярной операции"
        GridLayout:
            cols: 1
            GridLayout:
                cols: 1
                id: reg_ops_list
        Button:
            text: "Вернуться"
            on_release:
                app.root.current="main"
                root.manager.transition.direction = "right"

<ChangeRegularOperationScreen>:
    name: "reg_op_change"
    GridLayout:
        cols: 1
        Label:
            text: "Редактирование регулярной операции"
        GridLayout:
            cols: 2
            Label:
                text: "Введите название"
            TextInput:
                id: reg_op_name
        GridLayout:
            cols: 2
            Label:
                text: "Выбор типа регулярной операции"
            Spinner:
                id: reg_op_type
                text: "Выберите тип регулярной операции"
                values: root.reg_op_types
        GridLayout:
            cols: 2
            Label:
                text: "Сумма регулярной операции"
            TextInput:
                id: reg_op_sum
        GridLayout:
            cols: 2
            Label:
                text: "Выбор периодичности"
            Spinner:
                id: reg_op_period
                text: "Выберите периодичность регулярной операции"
                values: ["Каждый день", "Каждую неделю", "Каждый месяц", "Каждый год"]
        GridLayout:
            cols: 2
            Label:
                text: "Настройка уведомления"
            Spinner:
                id: reg_op_notification
                text: "Выберите периодичность уведомлений"
                values: ["За месяц", "За неделю", "За день", "В тот же день", "Через день"]
        GridLayout:
            cols: 2
            Button:
                text: "Вернуться"
                on_release:
                    app.root.current="main"
                    root.manager.transition.direction = "down"
            Button:
                text: "Добавить"


<AddRegularOperationScreen>:
    name: "add_reg_op"
    GridLayout:
        cols: 1
        Label:
            text: "Добавление регулярной операции"
        GridLayout:
            cols: 2
            Label:
                text: "Введите название"
            TextInput:
                id: reg_op_name
        GridLayout:
            cols: 2
            Label:
                text: "Выбор типа регулярной операции"
            Spinner:
                id: reg_op_type
                text: "Выберите тип регулярной операции"
                values: root.reg_op_types
        GridLayout:
            cols: 2
            Label:
                text: "Сумма регулярной операции"
            TextInput:
                id: reg_op_sum
        GridLayout:
            cols: 2
            Label:
                text: "Выбор периодичности"
            Spinner:
                id: reg_op_period
                text: "Выберите периодичность регулярной операции"
                values: ["Каждый день", "Каждую неделю", "Каждый месяц", "Каждый год"]
        GridLayout:
            cols: 2
            Label:
                text: "Настройка уведомления"
            Spinner:
                id: reg_op_notification
                text: "Выберите периодичность уведомлений"
                values: ["За месяц", "За неделю", "За день", "В тот же день", "Через день"]
        GridLayout:
            cols: 2
            Button:
                text: "Вернуться"
                on_release:
                    app.root.current="main"
                    root.manager.transition.direction = "down"
            Button:
                text: "Добавить"
                on_release:
                    root.add_reg_op(reg_op_name.text, reg_op_type.text, reg_op_sum.text, reg_op_period.text, reg_op_notification.text)


<RegularOperationTypesScreen>:
    name: "reg_op_types"

<StatisticsScreen>:
    name: "stats"
    GridLayout:
        cols: 1
        Label:
            text: "Статистика"
        GridLayout:
            cols: 2
            Label:
                text: "Введите дату начала периода аналитики"
            TextInput:
                id: start_date
        GridLayout:
            cols: 2
            Label:
                text: "Введите дату окончания периода аналитики"
            TextInput:
                id: end_date
        GridLayout:
            cols: 2
            Label:
                text: "Выбор типа регулярной операции"
            Spinner:
                id: reg_op_type_stat
                text: "Выберите тип регулярной операции"
                values: root.reg_op_types_statistics   
        GridLayout:
            cols: 2
            Label:
                text: "Сумма прихода за период"
            TextInput:
                id: total_income
        GridLayout:
            cols: 2
            Label:
                text: "Сумма платежей за период"
            TextInput:
                id: total_spend
        GridLayout:
            cols: 2
            Label:
                text: "Итог"
            TextInput:
                id: total
        GridLayout:
            cols: 2
            Button:
                text: "Посчитать"
                on_release:
                    root.get_statistics(reg_op_type_stat.text, start_date.text, end_date.text)

            Button:
                text: "Вернуться"
                on_release:
                    app.root.current="main"
                    root.manager.transition.direction = "left"

<SecretMenuScreen>:
    name: "secret"
    Button:
        text: "Вернуться"
        on_release:
            app.root.current="main"
            root.manager.transition.direction = "left"