ScreenManager:
    StartScreen:
    BalanceScreen:
    RegularOperationsScreen:
    RegularOperationTypesScreen:
    StatisticsScreen:
    AddRegularOperationScreen:
    SecretMenuScreen:


<StartScreen>:
    name: "main"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 2
            Label:
                text: "Контроллер баланса"
                font_size: '30sp'

            Label:
                text: "Текущий баланс: " + root.get_balance()
                font_size: '30sp'
        GridLayout:
            cols: 2
            Button:
                text: "Управление балансом"
                on_release:
                    app.root.current="balance"
            Button:
                text: "К регулярным операциям"
                on_release:
                    app.root.current="reg_ops"
                    root.manager.transition.direction = "left"
            Button:
                text: "К статистике"
                on_release:
                    app.root.current="stats"
                    root.manager.transition.direction = "right"
            Button:
                text: "Добавить регулярную операцию"
                on_release:
                    app.root.current="add_reg_op"
                    root.manager.transition.direction = "up"

<BalanceScreen>:
    name: "balance"
    GridLayout:
        cols: 1
        GridLayout:
            cols: 2
            Label:
                text: "Управление балансом"
                font_size: '30sp'
            Label:
                text: "Текущий баланс: %s" % root.balstr
                font_size: '30sp'
        GridLayout:
            cols: 1
            Label:
                text: "Введите название"
            TextInput:
                id: new_balance
        GridLayout:
            cols: 2
            Button:
                text: "Сохранить"
                on_release:
                    root.change_balance(new_balance.text)
                    app.root.current="main"
            Button:
                text: "Отмена"
                on_release:
                    app.root.current="main"

<RegularOperationsScreen>:
    name: "reg_ops"
    Button:
        text: "Вернуться"
        on_release:
            app.root.current="main"
            root.manager.transition.direction = "right"

<AddRegularOperationScreen>:
    name: "add_reg_op"
    GridLayout:
        cols: 1
        Label:
            text: "Добавление регулярной операции"
        GridLayout:
            cols: 2
            Label:
                text: "Введите название"
            TextInput:
                id: reg_op_name
        GridLayout:
            cols: 2
            Label:
                text: "Выбор типа регулярной операции"
            Spinner:
                id: reg_op_type
                text: "Выберите тип регулярной операции"
                values: root.reg_op_types
        GridLayout:
            cols: 2
            Label:
                text: "Сумма регулярной операции"
            TextInput:
                id: reg_op_sum
        GridLayout:
            cols: 2
            Label:
                text: "Выбор периодичности"
            Spinner:
                id: reg_op_period
                text: "Выберите периодичность регулярной операции"
                values: ["Каждый день", "Каждую неделю", "Каждый месяц", "Каждый год"]
        GridLayout:
            cols: 2
            Label:
                text: "Настройка уведомления"
            Spinner:
                id: reg_op_notification
                text: "Выберите периодичность уведомлений"
                values: ["За месяц", "За неделю", "За день", "В тот же день", "Через день"]
        GridLayout:
            cols: 2
            Button:
                text: "Вернуться"
                on_release:
                    app.root.current="main"
                    root.manager.transition.direction = "down"
            Button:
                text: "Добавить"
                on_release:
                    root.add_reg_op(reg_op_name.text, reg_op_type.text, reg_op_sum.text, reg_op_period.text, reg_op_notification.text)


<RegularOperationTypesScreen>:
    name: "reg_op_types"

<StatisticsScreen>:
    name: "stats"
    GridLayout:
        cols: 1
        Label:
            text: "Статистика"
        GridLayout:
            cols: 2
            Label:
                text: "Введите дату начала периода аналитики"
            TextInput:
                id: start_date
        GridLayout:
            cols: 2
            Label:
                text: "Введите дату окончания периода аналитики"
            TextInput:
                id: end_date
        GridLayout:
            cols: 2
            Label:
                text: "Выбор типа регулярной операции"
            Spinner:
                id: reg_op_type_stat
                text: "Выберите тип регулярной операции"
                values: root.reg_op_types_statistics   
        GridLayout:
            cols: 2
            Label:
                text: "Сумма прихода за период"
            TextInput:
                id: root.total_income
        GridLayout:
            cols: 2
            Label:
                text: "Сумма платежей за период"
            TextInput:
                id: root.total_spend
        GridLayout:
            cols: 2
            Label:
                text: "Итог"
            TextInput:
                id: root.total
        GridLayout:
            cols: 2
            Button:
                text: "Посчитать"
                on_release:
                    root.get_statistics(reg_op_type_stat.text, start_date.text, end_date.text)

            Button:
                text: "Вернуться"
                on_release:
                    app.root.current="main"
                    root.manager.transition.direction = "left"

<SecretMenuScreen>:
    name: "secret"
    Button:
        text: "Вернуться"
        on_release:
            app.root.current="main"
            root.manager.transition.direction = "left"